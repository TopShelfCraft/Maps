<h2>Javascript Setup</h2>

<p>Payments with Charge are all javascript dependent as Stripe depends on javascript.</p>

<p>To setup Charge, the javascript is broken into <strong>4</strong> broad parts : </p>

<ol>
	<li>A javacript framework - in our examples jQuery</li>
	<li>The Stripe javascript library</li>
	<li>The Charge javascript library</li>
	<li>Specific on-page initialization</li>
</ol>

<h3>1. Javascript Framework</h3>

<p>JQuery is used in all our examples, and the bundled Charge library depends on it also. The Stripe library is framework agnostic, and all our examples can be made to work with any library (or no library) of your choosing.</p>


<pre><code>&lt;script src="<em>//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js</em>"&gt;&lt;/script&gt;</code></pre>

<h3>2. Stripe Library</h3>
<p>The Stripe.js library is included as part of the Charge addon. The path to this library is available with the simple <code>{{ resourceUrl('charge/js/stripe_v2.min.js') }}</code> tag.</p>

<pre><code>&lt;script src="<em>{{ resourceUrl('charge/js/stripe_v2.min.js') }}</em>"&gt;&lt;/script&gt;</code></pre>


<p>If you'd prefer to use your own copy of the Stripe.js library, it's <a href="https://stripe.com/docs/stripe.js">available from the Stripe docs</a>.</p>

<p><a href="https://stripe.com/docs/stripe.js" class="button">Full Details about Stripe.js</a></p>

<h3>3. Charge Library</h3>
<p>To make the process of setting up Charge simpler, we've abstracted the main work of setting up stripe to work with your form into our own simple library. This is called from the page with the <code>.charge()</code> function, as shown in the next part.</p>


<pre><code>&lt;script src="<em>{{ resourceUrl('charge/js/jquery.charge.js') }}</em>"&gt;&lt;/script&gt;</code></pre>

<p>You're encouraged to check the Charge library directly and make your own copy as needed. The charge library is intended only as a starter to cover the basic setup.</p>

<p class="note"><strong>Note:</strong> If you do need to modify the library, be sure to make a local copy and modify the copy, not the original so you won't loose any changes when you update the Charge addon</p>

<p class="note"><strong>Note:</strong> Our Charge library makes use of the data attributes as <a href="https://stripe.com/docs/stripe.js">described in the Stripe.js docs</a>. Just add an attribute of 'data-stripe' to all the card inputs, and it'll do the rest.</p>

<p>The Charge library makes some assumptions on your form setup, and requires two variables passed to correctly attach to your form, as shown in the next part.</p>


<h3>4. Specific on-page initialization</h3>
<p>This is a simple as (a) Setting your <em>Stripe Publishable Key</em>, and calling our Charge Library with your chosen ids. Like so : </p>


<pre><code>&lt;script&gt;
(function(window, undefined) {
        Stripe.setPublishableKey('<em>{{ craft.charge.getPublicKey() }}</em>');
        $(this).<em>charge('#charge-form', '#payment-errors')</em>;
})(window);
&lt;/script&gt;</code></pre>

<p>In this case we have our form with an id of '<em>charge-form</em>' (the default), and an error container with an id of '<em>payment-errors</em>'.</p>


<h2>And Finally...</h2>

<p>It should look something like this : </p>


<pre><code>&lt;script src="<em>//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js</em>"&gt;&lt;/script&gt;
&lt;script src="<em>{{ resourceUrl('charge/js/stripe_v2.min.js') }}</em>"&gt;&lt;/script&gt;
&lt;script src="<em>{{ resourceUrl('charge/js/jquery.charge.js') }}</em>"&gt;&lt;/script&gt;
&lt;script&gt;
(function(window, undefined) {
        Stripe.setPublishableKey('<em>{{ craft.charge.getPublicKey() }}</em>');
        $(this).<em>charge('#charge-form', '#payment-errors')</em>;
})(window);
&lt;/script&gt;</code></pre>

<p>Job done. Be sure to add the <em>data-*</em> attributes to your <em>card_*</em> inputs.</p>




